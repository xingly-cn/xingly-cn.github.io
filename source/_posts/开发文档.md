---
title: 就业管理系统-开发文档 
date: 2021-07-14 20:51:54 
tags: [SpringBoot,Mybaits,Thymeleaf]
categories: java 
abbrlink: employeement
top_img: transparent 
cover: https://i.loli.net/2021/07/14/VhCvWUnDgGw2q5B.png
---

#### 前言

基于SpringBoot + Thymeleaf + Mybatis实现的学生就业管理系统，未使用安全框架。

采用前后端分离，这里只介绍后端设计。功能不够完善，如果有需要可以自己新增功能。

#### 功能展示

![](https://img.shields.io/badge/SpringBoot-√-success)![](https://img.shields.io/badge/Mybatis-√-success)![](https://img.shields.io/badge/Thymeleaf-√-success)

演示站：[教务管理系统]([一枚方糖 - 就业管理系统 (xingly.cn)](http://auth.xingly.cn/))

GitHub：[https://github.com/xingly-cn/StudentWork](https://github.com/xingly-cn/StudentWork)

感谢你的支持！

- 登陆页面

![image-20210714210220156](https://i.loli.net/2021/07/14/H5blaQewgrBUJ28.png)

- 学生就业信息

![image-20210714210246667](https://i.loli.net/2021/07/14/cBdOtAqZESKL4sl.png)

- 学生就业信息添加/编辑

![](https://i.loli.net/2021/07/14/INaBtHLkRK2rTE9.png)

- 学生就业统计（根据不同领域，专业，班级，岗位，企业）

![image-20210714210353979](https://i.loli.net/2021/07/14/qnhVouO3iae4yLw.png)

- 管理员管理

![image-20210714210429365](https://i.loli.net/2021/07/14/qbEGWXpYrN56Mmw.png)

- 普通用户管理（没有删除成员权限）

![image-20210714210508128](https://ftp.bmp.ovh/imgs/2021/07/ba544a4b94e06bfd.png)

#### Common层

 通用返回格式类`CommonResult<T>`，前端使用`Layui框架`下面是标准返回格式，并增加了多种构造方法使用

```java
/**
 * 通用返回格式，使用泛型兼容layui框架
 * */
public class CommonResult<T> {
    private long code;  //状态码
    private String msg; //消息
    private long count; //返回数据的数量
    private T data;	 	//数据
    
	//构造方法
    private CommonResult(){};
    private CommonResult(long code, String msg, long count, T data) {
        this.code = code;
        this.msg = msg;
        this.count = count;
        this.data = data;
    }

    /**
     * 构造方法 - 成功
     * @param count 数量
     * @param data 数据
     * */
    public static <T> CommonResult<T> generateSuccessResult(long count, T data){
        return new CommonResult<T>(ResultCode.SUCCESS.getCode(), ResultCode.SUCCESS.getMsg(), count, data);
    }

    /**
     * 构造方法 - 成功 - 可自定义消息
     * @param msg 成功提示信息
     * @param count 数量
     * @param data 数据
     * */
    public static <T> CommonResult<T> generateSuccessResult(String msg, long count, T data){
        return new CommonResult<T>(ResultCode.SUCCESS.getCode(), msg, count, data);
    }

    /**
     * 构造方法 - 失败
     * @param count 数量
     * @param data 数据
     * */
    public static <T> CommonResult<T> generateFailureResult(long count, T data){
        return new CommonResult<T>(ResultCode.FAILURE.getCode(), ResultCode.FAILURE.getMsg(), 0, null);
    }

    /**
     * 构造方法 - 失败 - 可自定义消息
     * @param msg 成功提示信息
     * @param count 数量
     * @param data 数据
     * */
    public static <T> CommonResult<T> generateFailureResult(String msg, long count, T data){
        return new CommonResult<T>(ResultCode.FAILURE.getCode(), msg, 0, null);
    }
    
	//get，set方法
    public long getCode() {
        return code;
    }

    public void setCode(long code) {
        this.code = code;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public long getCount() {
        return count;
    }

    public void setCount(long count) {
        this.count = count;
    }

    public T getData() {
        return data;
    }

    public void setData(T data) {
        this.data = data;
    }
}
```

 状态码枚举类`ResultCode`，要么成功，要么失败

```java
/**
 * 状态码枚举类
 * */
public enum ResultCode {
	// 要么成功，要么失败
    SUCCESS(0, "成功"),//成功的实例，为了兼容layui table 写成0，最好是200
    FAILURE(500, "失败");//失败的实例

    private long code;	 //状态码
    private String msg;  //消息

    //枚举类必须先定义枚举实例再定义方法，且构造函数必须私有
    ResultCode(long code, String msg) {
        this.code = code;
        this.msg = msg;
    }
    
    //get方法
    public long getCode() {
        return code;
    }
    
    public String getMsg() {
        return msg;
    }
}
```

#### Entity类

 与数据表一一对应的实体类方法，直接用`Lombok`比较方便

```java
/*
 *	EmploymentInfo表
 */
public class EmploymentInfo {
    private String informationId;
    private String companyName;
    private String companyAddress;
    private String employmentStation;
    private String treatment;
    private String abilityRequirement;
    private String studentName;
    private String studentMajor;
    private String studentGender;
    private String studentClass;
    private String studentMobile;
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    @JsonFormat(pattern = "yyyy-MM-dd", timezone = "GMT+8")
    private Date employmentTime;
    private String companyContactName;
    private String companyContactMobile;

    public String getInformationId() {
        return informationId;
    }

    public void setInformationId(String informationId) {
        this.informationId = informationId;
    }

    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }

    public String getCompanyAddress() {
        return companyAddress;
    }

    public void setCompanyAddress(String companyAddress) {
        this.companyAddress = companyAddress;
    }

    public String getEmploymentStation() {
        return employmentStation;
    }

    public void setEmploymentStation(String employmentStation) {
        this.employmentStation = employmentStation;
    }

    public String getTreatment() {
        return treatment;
    }

    public void setTreatment(String treatment) {
        this.treatment = treatment;
    }

    public String getAbilityRequirement() {
        return abilityRequirement;
    }

    public void setAbilityRequirement(String abilityRequirement) {
        this.abilityRequirement = abilityRequirement;
    }

    public String getStudentName() {
        return studentName;
    }

    public void setStudentName(String studentName) {
        this.studentName = studentName;
    }

    public String getStudentGender() {
        return studentGender;
    }

    public void setStudentGender(String studentGender) {
        this.studentGender = studentGender;
    }

    public String getStudentMajor() {
        return studentMajor;
    }

    public void setStudentMajor(String studentMajor) {
        this.studentMajor = studentMajor;
    }

    public String getStudentClass() {
        return studentClass;
    }

    public void setStudentClass(String studentClass) {
        this.studentClass = studentClass;
    }

    public String getStudentMobile() {
        return studentMobile;
    }

    public void setStudentMobile(String studentMobile) {
        this.studentMobile = studentMobile;
    }

    public Date getEmploymentTime() {
        return employmentTime;
    }

    public void setEmploymentTime(Date employmentTime) {
        this.employmentTime = employmentTime;
    }

    public String getCompanyContactName() {
        return companyContactName;
    }

    public void setCompanyContactName(String companyContactName) {
        this.companyContactName = companyContactName;
    }

    public String getCompanyContactMobile() {
        return companyContactMobile;
    }

    public void setCompanyContactMobile(String companyContactMobile) {
        this.companyContactMobile = companyContactMobile;
    }
}
```

```java
/*
 *	User表
 */
public class User {
    private String userId;
    private String userAccount;
    private String userName;
    private String userPwd;
    private String userType;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getUserAccount() {
        return userAccount;
    }

    public void setUserAccount(String userAccount) {
        this.userAccount = userAccount;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getUserPwd() {
        return userPwd;
    }

    public void setUserPwd(String userPwd) {
        this.userPwd = userPwd;
    }

    public String getUserType() {
        return userType;
    }

    public void setUserType(String userType) {
        this.userType = userType;
    }
}
```

#### Mapper层

 数据持久化，此项目有两个表`EmploymentInfo`和`User`分别对应两个Mapper文件

```java
/*
*	EmploymentInfo持久层
*/
@Repository
public interface EmploymentInfoMapper {
    // 查询所有学生就业信息
    List<EmploymentInfo> getAllEmploymentInfo(EmploymentInfo employmentInfo);
    // 查询一个学生就业信息
    List<EmploymentInfo> getEmploymentInfo(EmploymentInfo employmentInfo);
    // 查询学生数量和专业
    List<Map<String, String>> getStudentCount(String fieldName);
    // 添加一个学生就业信息
    int addEmploymentInfo(EmploymentInfo employmentInfo);
    // 更新一个学生就业信息
    int updateEmploymentInfo(EmploymentInfo employmentInfo);
    // 删除一个学生就业信息
    int deleteEmploymentInfo(String infoId);
}
```

```java
/*
*	User持久层
*/
@Repository
public interface UserMapper {
    // 查询所有管理员对象
    List<User> getAllUsers(User user);
    // 查询一个管理员对象通过Id
    User getUserById(String userId);
    // 查询一个管理员通过账号
    User getUserByAccount(String userAccount);
    // 添加管理员
    int addUser(User user);
    // 更新管理员
    int updateUser(User user);
    // 删除管理员
    int deleteUser(String userId);
}
```

 这里采用的是`基于Mapper接口`，xml配置文件的namespace必须和Mapper接口的名`相同`

```java
/*
*	EmploymentInfo配置文件
*/
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjpowernode.employment.mapper.EmploymentInfoMapper">
    <resultMap id="employmentInfoResultMap" type="com.bjpowernode.employment.mapper.entity.EmploymentInfo">
        <result column="information_id" jdbcType="VARCHAR" property="informationId" />
        <result column="company_name" jdbcType="VARCHAR" property="companyName" />
        <result column="company_address" jdbcType="VARCHAR" property="companyAddress" />
        <result column="employment_station" jdbcType="VARCHAR" property="employmentStation" />
        <result column="treatment" jdbcType="VARCHAR" property="treatment" />
        <result column="ability_requirement" jdbcType="VARCHAR" property="abilityRequirement" />
        <result column="student_name" jdbcType="VARCHAR" property="studentName" />
        <result column="student_major" jdbcType="VARCHAR" property="studentMajor" />
        <result column="student_gender" jdbcType="VARCHAR" property="studentGender" />
        <result column="student_class" jdbcType="VARCHAR" property="studentClass" />
        <result column="student_mobile" jdbcType="VARCHAR" property="studentMobile" />
        <result column="company_contact_name" jdbcType="VARCHAR" property="companyContactName" />
        <result column="company_contact_mobile" jdbcType="VARCHAR" property="companyContactMobile" />
        <result column="employment_time" jdbcType="TIMESTAMP" property="employmentTime" />
    </resultMap>
	// 查询所有学生就业信息 - 根据时间排序
    <select id="getEmploymentInfo" resultMap="employmentInfoResultMap">
        select information_id, company_name, company_address, employment_station, treatment, ability_requirement, student_name,
            student_major, student_gender, student_class, student_mobile, company_contact_name, company_contact_mobile, employment_time
        from employment_info order by employment_time
    </select>
	// 查询所有学生就业信息
    <select id="getAllEmploymentInfo" parameterType="com.bjpowernode.employment.mapper.entity.EmploymentInfo" resultMap="employmentInfoResultMap">
        select information_id, company_name, company_address, employment_station, treatment, ability_requirement, student_name,
            student_major, student_class, student_gender, student_mobile, company_contact_name, company_contact_mobile, employment_time
        from employment_info
        where 1=1
        <if test="informationId != null and informationId != ''">
             and information_id = #{informationId}
        </if>
        <if test="studentMajor != null and studentMajor != ''">
            and student_major like '%${studentMajor}%'
        </if>
        <if test="studentClass != null and studentClass != ''">
            and student_class like '%${studentClass}%'
        </if>
        <if test="studentGender != null and studentGender != ''">
            and student_gender = #{studentGender}
        </if>
        <if test="companyName != null and companyName != ''">
            and company_name like '%${companyName}%'
        </if>
        <if test="employmentStation != null and employmentStation != ''">
            and employment_station like '%${employmentStation}%'
        </if>
        order by employment_time
    </select>
	// 查询学生数量和专业
    <select id="getStudentCount" resultType="map">
        select count(information_id) studentCount, ${fieldName} from employment_info group by ${fieldName}
    </select>
	// 添加一个学生就业信息
    <insert id="addEmploymentInfo" parameterType="com.bjpowernode.employment.mapper.entity.EmploymentInfo">
        insert into employment_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="informationId != null">
                 information_id,
            </if>
            <if test="studentMajor != null">
                 student_major,
            </if>
            <if test="studentClass != null">
                 student_class,
            </if>
            <if test="studentGender != null">
                 student_gender,
            </if>
            <if test="companyName != null">
                 company_name,
            </if>
            <if test="companyAddress != null">
                 company_address,
            </if>
            <if test="treatment != null">
                 treatment,
            </if>
            <if test="abilityRequirement != null">
                 ability_requirement,
            </if>
            <if test="studentMobile != null">
                 student_mobile,
            </if>
            <if test="employmentTime != null">
                 employment_time,
            </if>
            <if test="companyContactName != null">
                 company_contact_name,
            </if>
            <if test="companyContactMobile != null">
                 company_contact_mobile,
            </if>
            <if test="studentName != null">
                 student_name,
            </if>
            <if test="employmentStation != null">
                 employment_station,
            </if>
        </trim>
        <trim prefix="values(" suffix=")" suffixOverrides=",">
            <if test="informationId != null">
                #{informationId},
            </if>
            <if test="studentMajor != null">
                #{studentMajor},
            </if>
            <if test="studentClass != null">
                #{studentClass},
            </if>
            <if test="studentGender != null">
                #{studentGender},
            </if>
            <if test="companyName != null">
                #{companyName},
            </if>
            <if test="companyAddress != null">
                #{companyAddress},
            </if>
            <if test="treatment != null">
                #{treatment},
            </if>
            <if test="abilityRequirement != null">
                #{abilityRequirement},
            </if>
            <if test="studentMobile != null">
                #{studentMobile},
            </if>
            <if test="employmentTime != null">
                #{employmentTime},
            </if>
            <if test="companyContactName != null">
                #{companyContactName},
            </if>
            <if test="companyContactMobile != null">
                #{companyContactMobile},
            </if>
            <if test="studentName != null">
                #{studentName},
            </if>
            <if test="employmentStation != null">
                #{employmentStation},
            </if>
        </trim>
    </insert>
	// 更新一个学生就业信息
    <update id="updateEmploymentInfo" parameterType="com.bjpowernode.employment.mapper.entity.EmploymentInfo">
        update employment_info
        <set>
            <if test="studentMajor != null">
                 student_major = #{studentMajor},
            </if>
            <if test="studentClass != null">
                 student_class = #{studentClass},
            </if>
            <if test="studentGender != null">
                 student_gender = #{studentGender},
            </if>
            <if test="companyName != null">
                 company_name = #{companyName},
            </if>
            <if test="companyAddress != null">
                 company_address = #{companyAddress},
            </if>
            <if test="treatment != null">
                 treatment = #{treatment},
            </if>
            <if test="abilityRequirement != null">
                 ability_requirement = #{abilityRequirement},
            </if>
            <if test="studentMobile != null">
                 student_mobile = #{studentMobile},
            </if>
            <if test="employmentTime != null">
                 employment_time = #{employmentTime},
            </if>
            <if test="companyContactName != null">
                 company_contact_name = #{companyContactName},
            </if>
            <if test="companyContactMobile != null">
                 company_contact_mobile = #{companyContactMobile},
            </if>
            <if test="studentName != null">
                 student_name = #{studentName},
            </if>
            <if test="employmentStation != null">
                 employment_station = #{employmentStation},
            </if>
        </set>
        where information_id = #{informationId}
    </update>
	// 删除一个学生就业信息
    <delete id="deleteEmploymentInfo">
        delete from employment_info where information_id = #{informationId}
    </delete>
</mapper>
```

```java
/*
*	User配置文件
*/
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjpowernode.employment.mapper.UserMapper">
    <resultMap id="userResultMap" type="com.bjpowernode.employment.mapper.entity.User">
        <result column="user_id" jdbcType="VARCHAR" property="userId" />
        <result column="user_name" jdbcType="VARCHAR" property="userName" />
        <result column="user_pwd" jdbcType="VARCHAR" property="userPwd" />
        <result column="user_account" jdbcType="VARCHAR" property="userAccount" />
        <result column="user_type" jdbcType="VARCHAR" property="userType" />
    </resultMap>
	// 查询所有管理员对象
    <select id="getAllUsers" resultMap="userResultMap" parameterType="com.bjpowernode.employment.mapper.entity.User">
        select user_id, user_name, user_pwd, user_account, user_type from user
        where 1=1
        <if test="userId != null and userId != ''">
            and user_id = #{userId}
        </if>
        <if test="userName != null and userName != ''">
            and user_name like '%${userName}'
        </if>
        <if test="userAccount != null and userAccount != ''">
            and user_account like '%${userAccount}'
        </if>
        <if test="userType != null and userType != ''">
            and user_type = #{user_type}
        </if>
    </select>
	// 查询一个管理员对象通过Id
    <select id="getUserById" resultMap="userResultMap">
        select user_id, user_name, user_pwd, user_account, user_type from user
        where user_id = #{userId}
    </select>
	// 查询一个管理员通过账号
    <select id="getUserByAccount" resultMap="userResultMap">
        select user_id, user_name, user_pwd, user_account, user_type from user
        where user_account = #{userAccount}
    </select>
	// 添加管理员
    <insert id="addUser" parameterType="com.bjpowernode.employment.mapper.entity.User">
        insert into user 
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                user_id,
            </if>
            <if test="userName != null">
                user_name,
            </if>
            <if test="userPwd != null">
                user_pwd,
            </if>
            <if test="userAccount != null">
                user_account,
            </if>
            <if test="userType != null">
                user_type,
            </if>
        </trim>
        <trim prefix="values(" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                #{userId},
            </if>
            <if test="userName != null">
                #{userName},
            </if>
            <if test="userPwd != null">
                #{userPwd},
            </if>
            <if test="userAccount != null">
                #{userAccount},
            </if>
            <if test="userType != null">
                #{userType},
            </if>
        </trim>
    </insert>
	// 更新管理员
    <update id="updateUser" parameterType="com.bjpowernode.employment.mapper.entity.User">
        update user
        <set>
            <if test="userName != null">
                user_name = #{userName},
            </if>
            <if test="userPwd != null">
                user_pwd = #{userPwd},
            </if>
            <if test="userAccount != null">
                user_account = #{userAccount},
            </if>
            <if test="userType != null">
                user_type = #{userType},
            </if>
        </set>
        where user_id = #{userId}
    </update>
	// 删除管理员
    <delete id="deleteUser">
        delete from user where user_id = #{userId}
    </delete>
</mapper>
```

#### Service层

 封装业务逻辑，使持久层与业务层分离，这里有两个`EmploymentInfoService`和`UserService`

```java
/*
*	EmploymentInfo接口
*/
public interface EmploymentInfoService {
    // 查询所有学生就业信息，并提供分页
    List<EmploymentInfo> getAllEmploymentInfo(EmploymentInfo employmentInfo, int pageNum, int pageSize);
    // 查询所有学生就业信息，并提供分页
    List<EmploymentInfo> getEmploymentInfo(EmploymentInfo employmentInfo, int pageNum, int pageSize);
    // 查询专业学生数量，并提供分页
    List<Map<String, String>> getStudentCount(String fieldName, int pageNum, int pageSize);
    // 增加/更新/删除学生就业信息
    void addEmploymentInfo(EmploymentInfo employmentInfo);
    void updateEmploymentInfo(EmploymentInfo employmentInfo);
    void deleteEmploymentInfo(String infoId);
}
```

```java
/*
*	User接口
*/
public interface UserService {
    // 查询所有管理员，并提供分页
    List<User> getAllUsers(User user, int pageNum, int pageSize);
    // 查询管理员Id，并提供分页
    User getUserById(String userId);
    // 查询管理员通过账号，并提供分页
    User getUserByAccount(String userAccount);
    // 增加/更新/删除管理员
    void addUser(User user);
    void updateUser(User user);
    void deleteUser(String userId);
}
```

#### ServiceImpl类

 采用 **Service层 = Service接口 + ServiceImpl 实现类**，实现**接口松耦合**

```java
@Service
public class EmploymentInfoServiceImpl implements EmploymentInfoService{
    // 注入Mapper层
    @Autowired
    EmploymentInfoMapper employmentInfoMapper;
    
	// 查询所有学生就业信息
    @Override
    public List<EmploymentInfo> getAllEmploymentInfo(EmploymentInfo employmentInfo, int pageNum, int pageSize) {
        // 分页插件
        PageHelper.startPage(pageNum, pageSize);
        return employmentInfoMapper.getAllEmploymentInfo(employmentInfo);
    }
    
	// 查询所有学生就业信息
    @Override
    public List<EmploymentInfo> getEmploymentInfo(EmploymentInfo employmentInfo, int pageNum, int pageSize) {
        // 分页插件
        PageHelper.startPage(pageNum, pageSize);
        return employmentInfoMapper.getEmploymentInfo(employmentInfo);
    }
    
	// 查询学生专业和人数
    @Override
    public List<Map<String, String>> getStudentCount(String fieldName, int pageNum, int pageSize) {
        // 分页插件
        PageHelper.startPage(pageNum, pageSize);
        return employmentInfoMapper.getStudentCount(fieldName);
    }

    // 增删改学生就业信息
    @Override
    public void addEmploymentInfo(EmploymentInfo employmentInfo) {
        employmentInfoMapper.addEmploymentInfo(employmentInfo);
    }

    @Override
    public void updateEmploymentInfo(EmploymentInfo employmentInfo) {
        employmentInfoMapper.updateEmploymentInfo(employmentInfo);
    }

    @Override
    public void deleteEmploymentInfo(String infoId) {
        employmentInfoMapper.deleteEmploymentInfo(infoId);
    }
}
```

```java
@Service
public class UserServiceImpl implements UserService {
    // 注入Mapper层
    @Autowired
    UserMapper userMapper;

    // 查询所有管理员
    @Override
    public List<User> getAllUsers(User user, int pageNum, int pageSize) {
        PageHelper.startPage(pageNum, pageSize);
        return userMapper.getAllUsers(user);
    }

    // 查询管理员通过Id
    @Override
    public User getUserById(String userId) {
        return userMapper.getUserById(userId);
    }

    // 查询管理员通过账号
    @Override
    public User getUserByAccount(String userAccount) {
        return userMapper.getUserByAccount(userAccount);
    }

    // 增删改管理员
    @Override
    public void addUser(User user) {
        userMapper.addUser(user);
    }

    @Override
    public void updateUser(User user) {
        userMapper.updateUser(user);
    }

    @Override
    public void deleteUser(String userId) {
        userMapper.deleteUser(userId);
    }
}
```

#### Application配置

```yaml
server:
  # 端口8080
  port: 8080

spring:
  #thymeleaf
  thymeleaf:
  	# 关闭模板引擎缓存
    cache: false

  # 数据库连接配置
  datasource:
    url: jdbc:mysql://rm-uf6431u6v7t3223q0bo.mysql.rds.aliyuncs.com:3306/employment?characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&serverTimezone=Asia/Shanghai&useInformationSchema=true
    username: root
    password: XNXxnx520@
    
  # mybatis配置文件路径
mybatis:
  mapper-locations: classpath*:mapper/*.xml
```

#### Control层

 业务模块流程控制，有四个`HomeController`，`UserController`，`EmploymentStatisticController`，`EmploymentInfoController`

```java
/*
*	HomeController,登陆模块
* 	实现登陆判断
*/
@Controller
public class HomeController {
    // 注入User业务层
    @Autowired
    UserService userService;

    // 登陆页面 映射
    @RequestMapping({"/","/index"})
    public String index(){
        return "system/login";
    }

    // 登陆判断
    @ResponseBody
    @RequestMapping("/employment/login")
    public CommonResult<User> login(User user){
        // 前端传来的user对象得密码 MD5加密
        user.setUserPwd(MD5Util.getMD5(user.getUserPwd()));
        // 查询数据库这个账号是否存在
        User loginUser = userService.getUserByAccount(user.getUserAccount());
        // 判断查询出的对象是否为空 和 密码是否错误
        if(loginUser == null || !loginUser.getUserPwd().equals(user.getUserPwd())){
           // 账号不存在或密码错误 - 返回失败
           return  CommonResult.generateFailureResult("帐号或密码不正确", 1, null);
        }else{
            // 登陆成功，返回登陆对象
           return CommonResult.generateSuccessResult(1, loginUser);
        }
    }
}

```

```java
/*
*	EmploymentStatisticController,统计模块
*	统计xx的数量
*/
@Controller
public class EmploymentStatisticController {
    // 注入EmploymentInifo业务层
    @Autowired
    EmploymentInfoService employmentInfoService;
    
	// 统计页面 映射
    @RequestMapping("/employment/statistic")
    public String index(){
        return "system/employmentstatistic/employmentstatistic";
    }
	
    /**
    * 根据前端传入的{fieldName}，决定查询{fieldName}对应的学生数量
    * 并实现分页查询
    */
    @ResponseBody
    @RequestMapping("/employment/statistic/{fieldName}")
    public CommonResult<List<Map<String, String>>> getStatisticData(@PathVariable("fieldName") String fieldName,
                                                              @RequestParam("limit") int pageSize, @RequestParam("page") int pageNum){
        List<Map<String, String>> statisticResult = employmentInfoService.getStudentCount(fieldName, pageNum, pageSize);
        return CommonResult.generateSuccessResult(statisticResult.size(), statisticResult);
    }
}

```

```java
/*
*	UserController,管理员模块
*	增删改查 管理员对象
*/
@Controller
public class UserController {
    // 注入User业务层
    @Autowired
    UserService userService;

    // 添加/编辑管理员页面 映射
    @RequestMapping("/employment/usermanage")
    public String index(){
        return "system/usermanage/usermanage";
    }

    // 查询所有管理员对象
    @ResponseBody
    @RequestMapping("/employment/getallusers")
    public CommonResult<List<User>> getAllUsers(User user, @RequestParam("limit") int pageSize, @RequestParam("page") int pageNum){
        List<User> result = userService.getAllUsers(user, pageNum, pageSize);
        return CommonResult.generateSuccessResult(result.size(), result);
    }
	
    // 查询管理员对象通过账号
    @ResponseBody
    @RequestMapping("/employment/getuserbyaccount/{userAccount}")
    public CommonResult<User> getUserByAccount(@PathVariable("userAccount") String userAccount){
        return CommonResult.generateSuccessResult(1, userService.getUserByAccount(userAccount));
    }

    // 添加管理员对象
    @ResponseBody
    @RequestMapping("/employment/adduser")
    public CommonResult<Integer> addUser(User user){
        user.setUserId(UUID.randomUUID().toString());
        // 密码使用MD5加密
        user.setUserPwd(MD5Util.getMD5(user.getUserPwd()));
        userService.addUser(user);
        return CommonResult.generateSuccessResult(1, 1);
    }

    // 更新管理员对象
    @ResponseBody
    @RequestMapping("/employment/updateuser")
    public CommonResult<Integer> updateUser(User user){
        userService.updateUser(user);
        return CommonResult.generateSuccessResult(1, 1);
    }
    
	// 删除管理员通过Id
    @ResponseBody
    @RequestMapping("/employment/deluser/{userId}")
    public CommonResult<Integer> delInfo(@PathVariable("userId") String userId){
        userService.deleteUser(userId);
        return CommonResult.generateSuccessResult(1, 1);
    }
}

```

```java
/*
*	EmploymentInfoController,学生就业模块
*	增删改查 学生就业对象
*/
@Controller
public class EmploymentInfoController {
    // 注入EmploymentInifo业务层
    @Autowired
    EmploymentInfoService employmentInfoService;

    // 学生就业信息页面 映射
    @RequestMapping({"/employment/index", "/employment/employmentinfo"})
    public String index(){
        return "system/employmentinfo/employmentinfo";
    }
	
    // 查询所有学生就业信息
    @ResponseBody
    @RequestMapping("/employment/getallinfo")
    public CommonResult<List<EmploymentInfo>> getAllInfo(EmploymentInfo employmentInfo, @RequestParam("limit") int pageSize, @RequestParam("page") int pageNum){
        List<EmploymentInfo> infoList = employmentInfoService.getAllEmploymentInfo(employmentInfo, pageNum, pageSize);
        CommonResult<List<EmploymentInfo>> rtInfoResult = CommonResult.generateSuccessResult(infoList.size(), infoList);
        return rtInfoResult;
    }

    // 查询所有学生就业信息
    @ResponseBody
    @RequestMapping("/employment/getinfo")
    public CommonResult<List<EmploymentInfo>> getinfo(EmploymentInfo info, @RequestParam("limit") int pageSize, @RequestParam("page") int pageNum){
        List<EmploymentInfo> infoList = employmentInfoService.getEmploymentInfo(info, pageNum, pageSize);
        CommonResult<List<EmploymentInfo>> rtInfoResult = CommonResult.generateSuccessResult(infoList.size(), infoList);

        return rtInfoResult;
    }

    // 添加学生就业信息
    @ResponseBody
    @RequestMapping("/employment/addinfo")
    public CommonResult<Integer> addInfo(EmploymentInfo info){
        info.setInformationId(UUID.randomUUID().toString());
        employmentInfoService.addEmploymentInfo(info);
        return CommonResult.generateSuccessResult(1, 1);
    }

    // 更新学生就业信息
    @ResponseBody
    @RequestMapping("/employment/updateinfo")
    public CommonResult<Integer> updateInfo(EmploymentInfo info){
        employmentInfoService.updateEmploymentInfo(info);
        return CommonResult.generateSuccessResult(1, 1);
    }

    // 删除学生就业信息通过Id
    @ResponseBody
    @RequestMapping("/employment/delinfo/{infoId}")
    public CommonResult<Integer> delInfo(@PathVariable("infoId") String infoId){
        employmentInfoService.deleteEmploymentInfo(infoId);
        return CommonResult.generateSuccessResult(1, 1);
    }
}

```

